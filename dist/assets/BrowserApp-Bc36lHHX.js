import{b as w,r as s,j as t}from"./index-B9CJKxBH.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]],v=w("bug",j),k=({url:a,noScript:f,userAgent:o,onPageLoad:m,onFetchError:u,isDebugMode:x,localTestContent:r})=>{const[b,l]=s.useState(!0),[c,h]=s.useState(null),[n,d]=s.useState(""),i=s.useRef(null);return s.useEffect(()=>{if(!a&&!r)return;if(l(!0),h(null),d(""),r){const e=i.current.contentWindow.document;e.open(),e.write(r),e.close(),l(!1);return}(async()=>{try{const e=await fetch(`/api/browse?url=${encodeURIComponent(a)}&noScript=${f}&userAgent=${o}`),p=await e.json();if(!e.ok)throw new Error(`Proxy Error (${e.status}): ${p.message||"No Data Received."}`);m(p),d(p.html);const g=i.current.contentWindow.document;g.open(),g.write(p.html),g.close()}catch(e){console.error("[DIAGNOSTIC_ERROR]",e),h(e),d(`{ "error": "${e.message}" }`),u(e)}})()},[a,f,o,m,u,r]),x?t.jsxs("div",{className:"w-full h-full p-2 bg-black text-green-400 font-mono text-xs",children:[t.jsx("h2",{className:"text-lg text-yellow-400 mb-2",children:"DEBUG MODE: Raw Proxy Output"}),t.jsx("textarea",{readOnly:!0,className:"w-full h-full bg-gray-900 border border-green-700 p-2",value:n})]}):t.jsxs("div",{className:"w-full h-full relative bg-black overflow-y-auto",children:[b&&t.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center",children:t.jsx("p",{className:"text-white",children:"Loading..."})}),c&&t.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center p-4 text-center",children:t.jsxs("div",{className:"bg-red-900/80 border border-red-500 text-white p-8 rounded-lg backdrop-blur-sm",children:[t.jsx("h2",{className:"text-2xl font-bold mb-2",children:"FETCH FAILED"}),t.jsx("p",{className:"text-red-300",children:c.message})]})}),t.jsx("iframe",{ref:i,title:a||"local-test",className:`w-full h-full border-none transition-opacity duration-300 ${(b||c)&&!r?"opacity-0":"opacity-100"}`,sandbox:"allow-scripts allow-same-origin allow-popups allow-forms",onLoad:()=>l(!1)})]})},S=()=>{const[a,f]=s.useState([{id:1,url:"https://google.com",title:"Google",history:["https://google.com"],historyIndex:0}]),[o,m]=s.useState(1),[u,x]=s.useState("https://google.com"),[r,b]=s.useState({noScript:!1,userAgent:"desktop"}),[l,c]=s.useState(!1),[h,n]=s.useState("");a.find(e=>e.id===o);const d=s.useCallback(()=>{n("")},[]),i=s.useCallback(()=>{n("")},[]),y=e=>e.preventDefault();return t.jsxs("div",{className:"w-full h-full bg-cyber-dark-surface flex flex-col text-white font-sans",children:[t.jsxs("div",{className:"bg-cyber-surface p-2 flex items-center gap-2 border-b border-cyber-border z-20",children:[t.jsx("form",{onSubmit:y,className:"flex-1",children:t.jsx("input",{type:"text",value:u,onChange:e=>x(e.target.value),className:"w-full bg-cyber-glass px-4 py-2 rounded-md border border-cyber-border"})}),t.jsx("button",{onClick:()=>c(!l),className:`p-2 rounded-md ${l?"bg-yellow-500 text-black":"hover:bg-cyber-glass"}`,title:"Debug Mode",children:t.jsx(v,{size:16})}),t.jsx("button",{onClick:()=>n("<h1>IT WORKS</h1><p>The iframe element is capable of rendering.</p>"),className:"p-2 rounded-md hover:bg-cyber-glass",title:"Test Local Render",children:"Test Render"})]}),t.jsx("div",{className:"flex-1 relative flex min-h-0",children:t.jsx("div",{className:"flex-1 relative",children:a.map(e=>t.jsx("div",{className:`w-full h-full absolute top-0 left-0 ${o===e.id?"z-10":"z-0"}`,children:o===e.id&&t.jsx(k,{url:e.url,noScript:r.noScript,userAgent:r.userAgent,onPageLoad:d,onFetchError:i,isDebugMode:l,localTestContent:h})},e.id))})})]})};export{S as BrowserApp};
